(this["webpackJsonpstuffed-floors-generator"]=this["webpackJsonpstuffed-floors-generator"]||[]).push([[0],{199:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(22),o=a.n(i),l=a(7),c=a(10),s=a(9),u=a(3),d=a(5),f=a(6),p=a(2),b=(a(17),a(13)),h=a.n(b),m=a(16),v=a(83),g=a(8),y=a(1),O=a(24),j=a(38),E=a(61),w=a.n(E),k=a(84),x=a.n(k),N=a(28),C=a(85),z=a(86),T=a.n(z),F=a(11),B=/[^a-z0-9_]+/gi,D=function(e){return e.replace(B,"")},P=function(e){var t=getComputedStyle(e),a=e.clientWidth,r=e.clientHeight;return{height:r-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),width:a-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}};function S(e,t){try{t.validateSync(e,{abortEarly:!1})}catch(o){if(o instanceof F.a){var a,r={},n=Object(O.a)(o.inner);try{for(n.s();!(a=n.n()).done;){var i=a.value;T()(r,i.path,i.message)}}catch(o){n.e(o)}finally{n.f()}return r}}return{}}function A(e){var t=[];if(!e)return t;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=e[a];"string"===typeof r&&t.push(r),Array.isArray(r)&&r.forEach((function(e){return t.push.apply(t,Object(N.a)(A(e)))})),Object(C.isObject)(r)&&t.push.apply(t,Object(N.a)(A(r)))}return t}var q=w.a.compile('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n<ModMetaData>\r\n  <name>{{name}}</name>\r\n  <author>{{author}}</author>\r\n  <url>{{url}}</url>\r\n  <supportedVersions>\r\n    <li>1.2</li>\r\n  </supportedVersions>\r\n  <description>{{description}}\r\n\r\n      Created with \u2764 and Fluffy\'s Stuffed Floor Generator.\r\n      todo: put a link here.\r\n  </description>\r\n  <packageId>{{packageId}}</packageId>\r\n  <modDependencies>\r\n    <li>\r\n      <packageId>fluffy.stuffedfloors</packageId>\r\n      <displayName>Stuffed Floors</displayName>\r\n      <steamWorkshopUrl>steam://url/CommunityFilePage/853043503</steamWorkshopUrl>\r\n      <downloadUrl>https://github.com/fluffy-mods/StuffedFloors/releases/latest</downloadUrl>\r\n    </li>\r\n  </modDependencies>\r\n  <loadAfter>\r\n    <li>fluffy.stuffedfloors</li>\r\n  </loadAfter>\r\n</ModMetaData>'),M=w.a.compile('<?xml version="1.0" encoding="utf-8" ?>\r\n<Defs>\r\n    {{#each floors}}\r\n    <StuffedFloors.FloorTypeDef Name="FloorBase">\r\n        <defName>{{defName}}</defName>\r\n        <label>{{label}}</label>\r\n        <description>{{description}}</description>\r\n        <texturePath>Floors/{{defName}}</texturePath>\r\n        <edgeType>{{edgeType}}</edgeType>\r\n        <renderPrecedence>70</renderPrecedence>\r\n        <stuffCategories>\r\n            {{#each stuffCategories as | stuff |}}\r\n            <li>{{stuff}}</li>\r\n            {{/each}}\r\n        </stuffCategories>\r\n        {{#if stats}}\r\n        <statBases>\r\n            {{#each stats}}\r\n            <{{def}}>{{value}}</{{def}}>\r\n            {{/each}}\r\n        </statBases>\r\n        {{/if}}\r\n        {{#if costs}}\r\n        <costList>\r\n            {{#each costs}}\r\n            <{{def}}>{{value}}</{{def}}>\r\n            {{/each}}\r\n        </costList>\r\n        {{/if}}\r\n        {{#if researchPrerequisites}}\r\n        <researchPrerequisites>\r\n            {{#each researchPrerequisites as | prerequisite |}}\r\n            <li>{{prerequisite}}</li>\r\n            {{/each}}\r\n        </researchPrerequisites>\r\n        {{/if}}\r\n        <layerable>true</layerable>\r\n        {{#if affordances}}\r\n        <affordances>\r\n            {{#each affordances as | affordance |}}\r\n            <li>{{affordance}}</li>\r\n            {{/each}}\r\n        </affordances>\r\n        {{/if}}\r\n        {{#if tags}}\r\n        <tags>\r\n            {{#each tags as | tag |}}\r\n            <li>{{tag}}</li>\r\n            {{/each}}\r\n        </tags>\r\n        {{/if}}\r\n        <fertility>0</fertility>\r\n        <constructEffect>ConstructDirt</constructEffect>\r\n        <terrainAffordanceNeeded>{{terrainAffordanceNeeded}}</terrainAffordanceNeeded>\r\n    </StuffedFloors.FloorTypeDef>\r\n    {{/each}}\r\n</Defs>\r\n');function I(e){return q(Object(j.a)(Object(j.a)({},e),{},{validationErrors:e.validationErrors,packageId:e.packageId}))}function W(e){return M(e)}function R(e,t){return L.apply(this,arguments)}function L(){return(L=Object(m.a)(h.a.mark((function e(t,a){var r,n,i,o,l,c,s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new x.a,n=D(t.name),i=I(t),r.file("".concat(n,"/About/About.xml"),i),o=W(a),r.file("".concat(n,"/Defs/Floors.xml"),o),l=Object(O.a)(a.floors);try{for(l.s();!(c=l.n()).done;)u=c.value,(null===(s=u.texture)||void 0===s?void 0:s.out)&&r.file("".concat(n,"/Textures/Floors/").concat(u.defName,".png"),u.texture.out.texture)}catch(d){l.e(d)}finally{l.f()}return e.next=10,r.generateAsync({type:"blob"});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V,H,U,X,Y,_,G,J,K,$,Q,Z,ee,te,ae,re,ne,ie,oe,le,ce,se,ue,de,fe,pe,be,he,me,ve,ge,ye,Oe,je,Ee,we,ke,xe,Ne,Ce,ze,Te,Fe,Be,De,Pe,Se,Ae,qe,Me,Ie,We,Re,Le,Ve,He,Ue,Xe,Ye,_e,Ge,Je,Ke,$e,Qe,Ze,et,tt,at,rt,nt,it,ot,lt,ct,st,ut,dt,ft,pt,bt,ht,mt,vt,gt,yt,Ot,jt,Et,wt,kt,xt,Nt,Ct,zt,Tt,Ft,Bt,Dt,Pt,St,At,qt=a(25),Mt=a.n(qt),It=a(41),Wt=a.n(It),Rt=Object(g.a)((H=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"building",U,Object(l.a)(e)),Object(u.a)(e,"download",X,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{id:"download-frame"},n.a.createElement("button",{className:Mt()({button:!0,"is-primary":!0,"is-loading":this.building}),onClick:this.download},"Download Mod"))}}]),a}(r.Component),U=Object(p.a)(H.prototype,"building",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=Object(p.a)(H.prototype,"download",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(m.a)(h.a.mark((function t(){var a,r,n,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.floors,n=a.about,!r.floors.some((function(e){return!Wt()(e.validationErrors)}))&&Wt()(n.validationErrors)){t.next=7;break}return Ua.set(!0),console.log({floors:r.floors.map((function(e){return e.validationErrors})),about:n.validationErrors,truthy:{floors:r.floors.some((function(e){return!Wt()(e.validationErrors)})),about:!Wt()(n.validationErrors)}}),t.abrupt("return");case 7:e.building=!0;case 8:return t.next=10,R(n,r);case 10:i=t.sent,Object(v.saveAs)(i,"".concat(e.props.about.name,".zip")),e.building=!1;case 13:case"end":return t.stop()}}),t)})))}}),V=H))||V,Lt=a(93),Vt=Object(g.a)(Y=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.touched,a=e.error;return(t||Ua.get())&&a&&n.a.createElement("div",{className:"error"},a)||null}}]),a}(r.Component))||Y,Ht=Object(g.a)((G=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"touched",J,Object(l.a)(e)),Object(u.a)(e,"onBlur",K,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.label,r=e.error,i=e.element,o=e.small,l=Object(Lt.a)(e,["id","label","error","element","small"]),c=i?n.a.cloneElement(i,Object(j.a)(Object(j.a)({},l),{},{id:t,onBlur:this.onBlur})):n.a.createElement("input",Object.assign({className:"input"},l,{id:t,onBlur:this.onBlur}));return o?n.a.createElement("div",{className:"field is-horizontal"},n.a.createElement("div",{className:"field-label is-small"},n.a.createElement("label",{htmlFor:t,className:"label"},a)),n.a.createElement("div",{className:"field-body"},n.a.createElement("div",{className:"control"},c))):n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:t,className:"label"},a),n.a.createElement("div",{className:"control"},c),n.a.createElement(Vt,{touched:this.touched,error:r}))}}]),a}(r.Component),J=Object(p.a)(G.prototype,"touched",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=Object(p.a)(G.prototype,"onBlur",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.touched=!0}}}),_=G))||_,Ut=($=function(){function e(){Object(d.a)(this,e),Object(u.a)(this,"name",Q,this),Object(u.a)(this,"description",Z,this),Object(u.a)(this,"author",ee,this),Object(u.a)(this,"url",te,this)}return Object(f.a)(e,[{key:"packageId",get:function(){return D(this.author)+"."+D(this.name)}},{key:"validationErrors",get:function(){return S(this,Xt)}}]),e}(),Q=Object(p.a)($.prototype,"name",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Z=Object(p.a)($.prototype,"description",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ee=Object(p.a)($.prototype,"author",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),te=Object(p.a)($.prototype,"url",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(p.a)($.prototype,"packageId",[y.h],Object.getOwnPropertyDescriptor($.prototype,"packageId"),$.prototype),Object(p.a)($.prototype,"validationErrors",[y.h],Object.getOwnPropertyDescriptor($.prototype,"validationErrors"),$.prototype),$),Xt=F.e({name:F.f().required(),description:F.f().required(),author:F.f().required(),url:F.f().url(),packageId:F.f().required()}),Yt=Object(g.a)(ae=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.about,a=t.name,r=t.description,i=t.author,o=t.url,l=t.validationErrors;return n.a.createElement("div",{id:"about"},n.a.createElement(Ht,{label:"Mod Name",id:"mod.name",value:a,onChange:function(t){return e.props.about.name=t.target.value},error:l.name}),n.a.createElement(Ht,{label:"Mod Description",id:"mod.desc",value:r,onChange:function(t){return e.props.about.description=t.target.value},error:l.description,element:n.a.createElement("textarea",{className:"textarea"})}),n.a.createElement(Ht,{label:"Author",id:"mod.author",value:i,onChange:function(t){return e.props.about.author=t.target.value},error:l.author}),n.a.createElement(Ht,{label:"Link",id:"mod.url",value:o,onChange:function(t){return e.props.about.url=t.target.value},error:l.url}))}}]),a}(r.Component))||ae,_t=Object(g.a)((ne=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).inputRef=Object(r.createRef)(),Object(u.a)(e,"onSubmit",ie,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"field has-addons is-fullwidth",style:{marginTop:"1em"}},n.a.createElement("div",{className:"control is-expanded"},n.a.createElement("input",{type:"text",className:"input",ref:this.inputRef,name:"url",id:"url"})),n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-info fetch-button",onClick:this.onSubmit},"Fetch")))}}]),a}(r.Component),ie=Object(p.a)(ne.prototype,"onSubmit",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(m.a)(h.a.mark((function t(){var a,r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.inputRef.current){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,fetch("https://cors-anywhere.herokuapp.com/"+a.value);case 6:return r=t.sent,t.next=9,r.blob();case 9:n=t.sent,e.props.setTexture(n),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.error("Error fetching ".concat(a.value,": \n").concat(t.t0));case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))}}),re=ne))||re,Gt=Object(g.a)(oe=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).canvasRef=Object(r.createRef)(),e.componentDidUpdate=Object(m.a)(h.a.mark((function t(){var a,r,n,i,o,l,c,s,u,d,f,p,b;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=e.canvasRef.current)&&(null===(a=e.props.texture)||void 0===a?void 0:a.out)){t.next=3;break}return t.abrupt("return");case 3:return n=e.props.texture.settings.mirror,i=P(r.parentElement),t.next=7,createImageBitmap(e.props.texture.out.texture);case 7:if(o=t.sent,l=r.getContext("2d")){t.next=11;break}return t.abrupt("return");case 11:if(r.width=Math.min(o.width,i.width),c=r.width/o.width,r.height=o.height*c,l.scale(c,c),n?(s=o.width/2,u=o.height/2,l.drawImage(o,s,u,s,u,0,0,s,s),l.drawImage(o,0,u,s,u,s,0,s,s),l.drawImage(o,0,0,s,u,s,s,s,s),l.drawImage(o,s,0,s,u,0,s,s,s)):l.drawImage(o,0,0),e.props.texture.settings.grid){for(d=o.width/16,f=o.height/16,l.setLineDash([5]),p=0;p<16;p++)l.moveTo(p*d,0),l.lineTo(p*d,o.height);for(b=0;b<16;b++)l.moveTo(0,b*f),l.lineTo(o.width,b*f);l.strokeStyle="steelblue",l.stroke()}case 17:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.texture;return n.a.createElement(n.a.Fragment,null,e&&n.a.createElement("canvas",{ref:this.canvasRef,"data-rendering":e.rendering,"data-revision":e.settings.revision}),!e&&n.a.createElement("div",{className:"no-content"},"No Texture"))}}]),a}(r.Component))||oe,Jt=Object(g.a)((ce=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"target",se,Object(l.a)(e)),Object(u.a)(e,"loadTexture",ue,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"file is-fullwidth has-name is-right"},n.a.createElement("label",{className:"file-label"},n.a.createElement("input",{className:"file-input",type:"file",name:"texture",id:"texture",accept:"image/*",onChange:this.loadTexture}),n.a.createElement("span",{className:"file-cta fetch-button"},"Upload"),n.a.createElement("span",{className:"file-name"},this.target)))}}]),a}(r.PureComponent),se=Object(p.a)(ce.prototype,"target",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ue=Object(p.a)(ce.prototype,"loadTexture",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(m.a)(h.a.mark((function t(a){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(null===(r=a.target.files)||void 0===r?void 0:r.length)&&(n=a.target.files[0],e.props.setTexture(n),e.target=n.name);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),le=ce))||le,Kt=(a(179),Object(g.a)(de=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.label,r=e.onChange,i=e.checked,o=e.rounded,l=e.outlined,c=e.small;return n.a.createElement("div",{className:"field"},n.a.createElement("input",{id:t,type:"checkbox",className:Mt()({switch:!0,"is-rounded":o,"is-outlined":l,"is-small":c}),checked:i,onChange:r}),n.a.createElement("label",{htmlFor:t},a))}}]),a}(r.Component))||de),$t=Object(g.a)(fe=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.texture,t=e.settings,a=e.toggleSetting,r=e.updateSetting;return n.a.createElement("div",{className:"texture-size"},n.a.createElement("span",{className:"help"},"Texture size:"," ","".concat(e.raw.size.width," x ").concat(e.raw.size.height," (original)"),t.tile&&", ".concat(e.raw.size.width*t.tilesX," x ").concat(e.raw.size.height*t.tilesY," (tiled)"),t.stretch&&", 1024 x 1024 (stretched)"),n.a.createElement("div",{className:"columns",style:{alignItems:"center"}},n.a.createElement("div",{className:"column"},n.a.createElement("div",{className:"columns",style:{alignItems:"center"}},n.a.createElement("div",{className:"column"},n.a.createElement(Kt,{id:"texture-tiling",label:"Tile",small:!0,rounded:!0,outlined:!0,checked:t.tile,onChange:function(){return a("tile")}})),t.tile&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"column"},n.a.createElement(Ht,{id:"texture-tiling-x",label:"x",small:!0,element:n.a.createElement("input",{className:"input is-small"}),value:t.tilesX,onChange:function(e){return r("tilesX",parseInt(e.target.value)||1)}})),n.a.createElement("div",{className:"column"},n.a.createElement(Ht,{id:"texture-tiling-y",label:"y",small:!0,element:n.a.createElement("input",{className:"input is-small"}),value:t.tilesY,onChange:function(e){return r("tilesY",parseInt(e.target.value)||1)}}))))),n.a.createElement("div",{className:"column"},n.a.createElement(Kt,{id:"texture-stretching",label:"Stretch / Shrink",small:!0,rounded:!0,outlined:!0,checked:t.stretch,onChange:function(){return a("stretch")}}))))}}]),a}(r.Component))||fe,Qt=a(90),Zt=a.n(Qt),ea=F.e().shape({raw:F.c().required("floor must have a texture"),out:F.e().required().shape({texture:F.c().required(),size:F.e().when("raw",{is:function(e){return!!e},then:F.e().shape({width:F.d(),height:F.d()}).test("dims","floor textures should be 1024x1024 pixels",(function(e){return 1024===(null===e||void 0===e?void 0:e.height)&&1024===e.width})).required()})})}),ta=(pe=function(){function e(t){var a=this;Object(d.a)(this,e),Object(u.a)(this,"raw",be,this),Object(u.a)(this,"out",he,this),Object(u.a)(this,"settings",me,this),Object(u.a)(this,"rendering",ve,this),Object(u.a)(this,"updateSetting",ge,this),Object(u.a)(this,"toggleSetting",ye,this),this.setRawSize=Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,createImageBitmap(a.raw.texture);case 2:t=e.sent,a.raw.size={width:t.width,height:t.height},a.setTiles();case 5:case"end":return e.stop()}}),e)}))),this.renderCanvas=document.createElement("canvas"),this.updateTextureDebounced=Zt()(this.updateTexture,500,{trailing:!0,leading:!0,maxWait:500}),this.raw={texture:t,size:{width:0,height:0}},this.settings={contrast:100,brightness:100,mirror:!1,desaturate:!1,tile:!1,tilesX:1,tilesY:1,stretch:!1,revision:0,grid:!1},this.setRawSize(),Object(y.g)((function(){var e=a.settings,t=a.raw;e.revision;t&&a.updateTextureDebounced(e,t.texture)}),{name:"updateTexture"})}return Object(f.a)(e,[{key:"updateTexture",value:function(){var e=Object(m.a)(h.a.mark((function e(t,a){var r,n,i,o,l,c,s,u,d,f,p,b,m,v,g,y,O=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.renderCanvas,n=t.brightness,i=t.desaturate,o=t.contrast,l=t.tile,c=t.tilesX,s=t.tilesY,u=t.stretch,r&&a){e.next=4;break}return e.abrupt("return");case 4:return this.rendering=!0,e.next=7,createImageBitmap(a);case 7:if(d=e.sent,u?(f=1024,p=1024):l?(f=c*this.raw.size.width,p=s*this.raw.size.height):(f=this.raw.size.width,p=this.raw.size.height),r.width=f,r.height=p,b=r.getContext("2d")){e.next=14;break}return e.abrupt("return");case 14:if(m="contrast(".concat(o/100,") saturate(").concat(i?0:1,") brightness(").concat(n/100,")"),b.filter=m,l)for(v={width:f/c,height:p/s},g=0;g<c;g++)for(y=0;y<s;y++)b.drawImage(d,g*v.width,y*v.height,v.width,v.height);else b.drawImage(d,0,0,f,p);r.toBlob((function(e){e?O.out={texture:e,size:{width:r.width,height:r.height}}:console.error("failed creating out texture"),O.rendering=!1}));case 18:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"setTiles",value:function(){this.settings.tilesX=Math.floor(1024/this.raw.size.width),this.settings.tilesY=Math.floor(1024/this.raw.size.height)}}]),e}(),be=Object(p.a)(pe.prototype,"raw",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=Object(p.a)(pe.prototype,"out",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=Object(p.a)(pe.prototype,"settings",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=Object(p.a)(pe.prototype,"rendering",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ge=Object(p.a)(pe.prototype,"updateSetting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.settings[t]=a,e.settings.revision++}}}),ye=Object(p.a)(pe.prototype,"toggleSetting",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.settings[t]=!e.settings[t],e.settings.revision++}}}),Object(p.a)(pe.prototype,"updateTexture",[y.f],Object.getOwnPropertyDescriptor(pe.prototype,"updateTexture"),pe.prototype),pe),aa=Object(g.a)((je=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"updateTexture",Ee,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.floor,t=e.texture;return n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{className:"label"},"Texture"),!t&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Jt,{setTexture:this.updateTexture}),n.a.createElement(_t,{setTexture:this.updateTexture})),n.a.createElement(Gt,{texture:t}),this.errors&&this.errors.map((function(e,t){return n.a.createElement(Vt,{touched:!1,error:e,key:t})})),t&&n.a.createElement($t,{texture:t}),t&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column"},n.a.createElement(Kt,{id:"".concat(e.id,"-mirror"),rounded:!0,outlined:!0,small:!0,label:"Check pattern tiling",checked:t.settings.mirror,onChange:function(){return t.toggleSetting("mirror")}})),n.a.createElement("div",{className:"column"},n.a.createElement(Kt,{id:"".concat(e.id,"-grid"),rounded:!0,outlined:!0,small:!0,label:"Show floor grid",checked:t.settings.grid,onChange:function(){return t.toggleSetting("grid")}})),n.a.createElement("div",{className:"column"},n.a.createElement(Kt,{id:"".concat(e.id,"-desaturate"),rounded:!0,outlined:!0,small:!0,label:"Desaturate",checked:t.settings.desaturate,onChange:function(){return t.toggleSetting("desaturate")}}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Contrast: ",t.settings.contrast,"%"),n.a.createElement("input",{className:"slider is-fullwidth is-small is-primary",step:"1",min:"0",max:"200",value:t.settings.contrast,onChange:function(e){return t.updateSetting("contrast",parseInt(e.target.value))},type:"range"})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Brightness: ",t.settings.brightness,"%"),n.a.createElement("input",{className:"slider is-fullwidth is-small is-primary",step:"1",min:"0",max:"200",value:t.settings.brightness,onChange:function(e){return t.updateSetting("brightness",parseInt(e.target.value))},type:"range"}))))}},{key:"errors",get:function(){return A(this.props.floor.validationErrors.texture)}}]),a}(r.Component),Ee=Object(p.a)(je.prototype,"updateTexture",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.floor.texture=new ta(t)}}}),Object(p.a)(je.prototype,"errors",[y.h],Object.getOwnPropertyDescriptor(je.prototype,"errors"),je.prototype),Oe=je))||Oe,ra=["Stone","Wood","Cloth","Metal"],na={Stone:["Stony"],Wood:["Woody"],Metal:["Metallic"],Cloth:["Fabric"]},ia=["Basic","Pretty","Royal"],oa={Basic:4,Pretty:4,Royal:10},la={Basic:["Floor"],Pretty:["Floor"],Royal:["Floor","FineFloor"]},ca={Stone:{Basic:[],Pretty:["Stonecutting"],Royal:["Stonecutting"]},Wood:{Basic:[],Pretty:[],Royal:[]},Metal:{Basic:[],Pretty:["Machining"],Royal:["Machining"]},Cloth:{Basic:["CarpetMaking"],Pretty:["CarpetMaking"],Royal:["CarpetMaking"]}},sa={Wood:"BurnedWoodPlankFloor",Cloth:"BurnedCarpet"},ua={Stone:{Basic:[{id:1,def:"WorkToBuild",value:75},{id:2,def:"Beauty",value:0}],Pretty:[{id:1,def:"WorkToBuild",value:150},{id:2,def:"Beauty",value:2}],Royal:[{id:1,def:"WorkToBuild",value:800},{id:2,def:"Beauty",value:3}]},Wood:{Basic:[{id:1,def:"WorkToBuild",value:250},{id:2,def:"Beauty",value:0},{id:3,def:"Flammability",value:.25}],Pretty:[{id:1,def:"WorkToBuild",value:400},{id:2,def:"Beauty",value:2},{id:3,def:"Flammability",value:.2}],Royal:[{id:1,def:"WorkToBuild",value:2100},{id:2,def:"Beauty",value:3},{id:3,def:"Flammability",value:.2}]},Cloth:{Basic:[{id:1,def:"WorkToBuild",value:250},{id:2,def:"Beauty",value:0},{id:3,def:"Flammability",value:.25}],Pretty:[{id:1,def:"WorkToBuild",value:400},{id:2,def:"Beauty",value:2},{id:3,def:"Flammability",value:.2}],Royal:[{id:1,def:"WorkToBuild",value:2100},{id:2,def:"Beauty",value:3},{id:3,def:"Flammability",value:.2}]},Metal:{Basic:[{id:1,def:"WorkToBuild",value:800},{id:2,def:"Beauty",value:0},{id:3,def:"Cleanliness",value:.1}],Pretty:[{id:1,def:"WorkToBuild",value:1500},{id:2,def:"Beauty",value:2},{id:3,def:"Cleanliness",value:.2}],Royal:[{id:1,def:"WorkToBuild",value:8e3},{id:2,def:"Beauty",value:3},{id:3,def:"Cleanliness",value:.3}]}},da=a(55),fa=["Metallic","Woody","Stony","Fabric","Leathery"],pa=["Light","Medium","Heavy","Diggable","GrowSoil"],ba=["Floor","FineFloor"],ha=["Machining","CarpetMaking","Stonecutting"],ma=["BurnedCarpet","BurnedWoodPlankFloor"],va=["Fade","FadeRough","Hard"],ga=Object(g.a)((Te=ze=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"add",Ne,Object(l.a)(e)),Object(u.a)(e,"delete",Ce,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.costs,r=t.errors;return n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"CostList"),n.a.createElement("div",{className:"costlist tags"},a.map((function(t,a){return n.a.createElement(ya,{cost:t,key:t.id,onDelete:e.delete,errors:null===r||void 0===r?void 0:r[a]})})),n.a.createElement("button",{className:"button is-success is-small",onClick:this.add},"Add Cost")),this.errorArray.map((function(e,t){return n.a.createElement(Vt,{touched:!0,error:e,key:t})})))}},{key:"errorArray",get:function(){var e=this.props.errors,t=[];if(e){var a,r=Object(O.a)(e);try{for(r.s();!(a=r.n()).done;){var n=a.value;t.push.apply(t,Object(N.a)(A(n)))}}catch(i){r.e(i)}finally{r.f()}}return Object(N.a)(new Set(t))}}]),a}(r.Component),ze.costCount=0,xe=Te,Object(p.a)(xe.prototype,"errorArray",[y.h],Object.getOwnPropertyDescriptor(xe.prototype,"errorArray"),xe.prototype),Ne=Object(p.a)(xe.prototype,"add",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.costs.push({id:"cost-".concat(e.props.id,"-").concat(ga.costCount++),def:"",value:0})}}}),Ce=Object(p.a)(xe.prototype,"delete",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.props.costs.findIndex((function(e){return e.id===t}));a<0||e.props.costs.splice(a,1)}}}),ke=xe))||ke,ya=Object(g.a)(we=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.cost,a=e.onDelete,r=e.errors;return n.a.createElement("div",{className:"defCount tag is-info"},n.a.createElement("input",{id:"defCount-count-".concat(t.id),placeholder:"count",value:t.value,onChange:function(e){return t.value=parseInt(e.target.value)||0},style:{width:"calc( ".concat(t.value.toString().length,"ch + 5px )")},className:Mt()({blank:0===t.value,error:null===r||void 0===r?void 0:r.value})}),"\xd7",n.a.createElement("input",{id:"defCount-def-".concat(t.id),placeholder:"thingDef",value:t.def,onChange:function(e){return t.def=e.target.value},style:{width:t.def?"calc( ".concat(t.def.length,"ch + 10px )"):"calc( ".concat("thingDef".length,"ch + 10px )")},className:Mt()({blank:!t.def,error:null===r||void 0===r?void 0:r.def})}),n.a.createElement("div",{className:"remove",onClick:function(){return a(t.id)}},n.a.createElement(La,null)))}}]),a}(r.Component))||we,Oa=Object(g.a)((Re=We=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"add",Me,Object(l.a)(e)),Object(u.a)(e,"delete",Ie,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.stats,r=t.errors;return n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"StatList"),n.a.createElement("div",{className:"statlist tags"},a.map((function(t,a){return n.a.createElement(ja,{stat:t,key:t.id,onDelete:e.delete,errors:null===r||void 0===r?void 0:r[a]})})),n.a.createElement("button",{className:"button is-success is-small",onClick:this.add},"Add Stat")),this.errorArray.map((function(e,t){return n.a.createElement(Vt,{touched:!0,error:e,key:t})})))}},{key:"errorArray",get:function(){var e=this.props.errors,t=[];if(e){var a,r=Object(O.a)(e);try{for(r.s();!(a=r.n()).done;){var n=a.value;t.push.apply(t,Object(N.a)(A(n)))}}catch(i){r.e(i)}finally{r.f()}}return Object(N.a)(new Set(t))}}]),a}(r.Component),We.statCount=0,qe=Re,Object(p.a)(qe.prototype,"errorArray",[y.h],Object.getOwnPropertyDescriptor(qe.prototype,"errorArray"),qe.prototype),Me=Object(p.a)(qe.prototype,"add",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.stats.push({id:"stat-".concat(e.props.id,"-").concat(Oa.statCount++),def:"",value:0})}}}),Ie=Object(p.a)(qe.prototype,"delete",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a=e.props.stats.findIndex((function(e){return e.id===t}));a<0||e.props.stats.splice(a,1)}}}),Ae=qe))||Ae,ja=Object(g.a)((Be=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(d.a)(this,a),r=t.call(this,e),Object(u.a)(r,"valueTemp",De,Object(l.a)(r)),Object(u.a)(r,"updateValue",Pe,Object(l.a)(r)),Object(u.a)(r,"applyValue",Se,Object(l.a)(r)),r.valueTemp=e.stat.value.toString(),r}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.stat,a=e.errors,r=e.onDelete;return n.a.createElement("div",{className:"defCount tag is-info"},n.a.createElement("input",{id:"defCount-def-".concat(t.id),placeholder:"thingDef",value:t.def,onChange:function(e){return t.def=e.target.value},style:{width:t.def?"calc( ".concat(t.def.length,"ch + 10px )"):"calc( ".concat("thingDef".length,"ch + 10px )")},className:Mt()({blank:!t.def,error:null===a||void 0===a?void 0:a.def})}),"=",n.a.createElement("input",{id:"defCount-count-".concat(t.id),value:this.valueTemp,onChange:this.updateValue,onBlur:this.applyValue,style:{width:"calc( ".concat(this.valueTemp.toString().length,"ch + 5px )")},className:Mt()({blank:0===t.value,error:null===a||void 0===a?void 0:a.value})}),n.a.createElement("div",{className:"remove",onClick:function(){return r(t.id)}},n.a.createElement(La,null)))}}]),a}(r.Component),De=Object(p.a)(Be.prototype,"valueTemp",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=Object(p.a)(Be.prototype,"updateValue",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.valueTemp=t.target.value}}}),Se=Object(p.a)(Be.prototype,"applyValue",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.stat.value=parseFloat(e.valueTemp.replace(/,/g,"."))||0,e.valueTemp=e.props.stat.value.toString()}}}),Fe=Be))||Fe,Ea=a(91),wa=a.n(Ea),ka=a(51),xa=Object(g.a)((Ve=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"touched",He,Object(l.a)(e)),Object(u.a)(e,"handleChange",Ue,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,r=t.selected,i=t.id,o=t.errors,l=Array.isArray(o)?o:[o];return n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label",htmlFor:i},a),n.a.createElement(ka.a,{id:i,isMulti:!0,onChange:this.handleChange,onBlur:function(){return e.touched=!0},options:this.options,value:r.map((function(e){return{label:e,value:e}})),className:"react-select",classNamePrefix:" "}),o&&wa()(l).map((function(t,a){return n.a.createElement(Vt,{touched:e.touched,error:t,key:a})})))}},{key:"options",get:function(){return this.props.options.map((function(e){return{label:e,value:e}}))}}]),a}(r.Component),Object(p.a)(Ve.prototype,"options",[y.h],Object.getOwnPropertyDescriptor(Ve.prototype,"options"),Ve.prototype),He=Object(p.a)(Ve.prototype,"touched",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ue=Object(p.a)(Ve.prototype,"handleChange",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){var r=t,n=e.props.selected;switch(e.touched=!0,a.action){case"clear":n.clear();break;case"select-option":n.push(a.option.value);break;case"create-option":var i,o=r.filter((function(e){return n.indexOf(e.value)<0})),l=Object(O.a)(o);try{for(l.s();!(i=l.n()).done;){var c=i.value;n.push(c.value)}}catch(u){l.e(u)}finally{l.f()}break;case"pop-value":case"remove-value":var s=n.indexOf(a.removedValue.value);s>=0&&n.splice(s,1)}}}}),Le=Ve))||Le,Na=Object(g.a)((Ye=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"touched",_e,Object(l.a)(e)),Object(u.a)(e,"onChange",Ge,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,r=t.id,i=t.error;return n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label",htmlFor:r},a),n.a.createElement(ka.a,{id:r,onChange:this.onChange,onBlur:function(){return e.touched=!0},options:this.options,value:this.selectedOption,className:"react-select",classNamePrefix:" "}),n.a.createElement(Vt,{touched:this.touched,error:i}))}},{key:"selectedOption",get:function(){var e=this.props.selected;if(e)return{label:e,value:e}}},{key:"options",get:function(){var e=this.props.options.map((function(e){return{value:e,label:e}}));return this.props.noneOption&&e.push({value:"",label:"<None>"}),e}}]),a}(r.Component),_e=Object(p.a)(Ye.prototype,"touched",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(p.a)(Ye.prototype,"selectedOption",[y.h],Object.getOwnPropertyDescriptor(Ye.prototype,"selectedOption"),Ye.prototype),Object(p.a)(Ye.prototype,"options",[y.h],Object.getOwnPropertyDescriptor(Ye.prototype,"options"),Ye.prototype),Ge=Object(p.a)(Ye.prototype,"onChange",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.touched=!0,e.props.updateSelected(t.value)}}}),Xe=Ye))||Xe,Ca=Object(g.a)((Ke=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"detailed",$e,Object(l.a)(e)),Object(u.a)(e,"simple",Qe,Object(l.a)(e)),Object(u.a)(e,"toggleDetailed",Ze,Object(l.a)(e)),Object(u.a)(e,"setMaterial",et,Object(l.a)(e)),Object(u.a)(e,"setType",tt,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.floor,t=this.detailed?n.a.createElement(za,{floor:e}):n.a.createElement(Ta,{floor:e,settings:this.simple,setMaterial:this.setMaterial,setType:this.setType});return n.a.createElement("div",{className:"settings"},n.a.createElement("div",{className:"field"},n.a.createElement("input",{id:"".concat(e.id,"-settings-detailed"),type:"checkbox",className:"switch is-rounded is-outlined is-small",checked:this.detailed,onChange:this.toggleDetailed}),n.a.createElement("label",{htmlFor:"".concat(e.id,"-settings-detailed")},"advanced mode")),t)}}]),a}(r.Component),$e=Object(p.a)(Ke.prototype,"detailed",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qe=Object(p.a)(Ke.prototype,"simple",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{material:"Wood",type:"Pretty"}}}),Ze=Object(p.a)(Ke.prototype,"toggleDetailed",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.detailed=!e.detailed,e.detailed||e.props.floor.resetFloor(e.simple.material,e.simple.type)}}}),et=Object(p.a)(Ke.prototype,"setMaterial",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.simple.material=t,e.props.floor.resetFloor(t,e.simple.type)}}}),tt=Object(p.a)(Ke.prototype,"setType",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.simple.type=t,e.props.floor.resetFloor(e.simple.material,t)}}}),Je=Ke))||Je,za=Object(g.a)(at=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.floor,t=e.validationErrors;return n.a.createElement("div",{className:"settings-detail"},n.a.createElement(xa,{label:"Stuff Categories",id:"".concat(e.id,"-stuff-categories"),options:fa,selected:e.stuffCategories,errors:t.stuffCategories}),n.a.createElement(Ht,{label:"Stuff Cost",value:e.stuffcost,id:"".concat(e.id,"-stuff-cost"),onChange:function(t){return e.stuffcost=parseInt(t.target.value)||0},error:t.stuffcost}),n.a.createElement(ga,Object.assign({},e,{errors:e.validationErrors.costs})),n.a.createElement(Oa,Object.assign({},e,{errors:e.validationErrors.stats})),n.a.createElement(xa,{label:"Research Prerequisites",id:"".concat(e.id,"-research-prerequisites"),options:ha,selected:e.researchPrerequisites,errors:t.researchPrerequisites}),n.a.createElement(Na,{label:"Burned Def",id:"".concat(e.id,"-burned-def"),selected:e.burnedDef||"",options:ma,error:t.burnedDef,updateSelected:function(t){return e.burnedDef=t}}),n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:"".concat(e.id,"-edge-type"),className:"label"},"Edge Type"),n.a.createElement(da.a,{id:"".concat(e.id,"-edge-type"),defaultValue:{label:e.edgeType,value:e.edgeType},onChange:function(t){var a=t;e.edgeType=a.value},options:va.map((function(e){return{label:e,value:e}})),className:"react-select",classNamePrefix:" "})),n.a.createElement(Na,{label:"Affordance Needed",id:"".concat(e.id,"-affordance-needed"),selected:e.terrainAffordanceNeeded,options:pa,updateSelected:function(t){return e.terrainAffordanceNeeded=t},error:t.terrainAffordanceNeeded}),n.a.createElement(xa,{label:"Affordances",id:"".concat(e.id,"-affordances"),options:pa,selected:e.affordances,errors:t.affordances}),n.a.createElement(xa,{label:"Tags",id:"".concat(e.id,"-tags"),options:ba,selected:e.tags,errors:t.tags}))}}]),a}(r.Component))||at,Ta=Object(g.a)(rt=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.settings,a=e.floor,r=e.setMaterial,i=e.setType;return n.a.createElement("div",{className:"settings-simple"},n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:"".concat(a.id,"-simple-material"),className:"label"},"Material"),n.a.createElement(da.a,{id:"".concat(a.id,"-simple-material"),defaultValue:{label:t.material,value:t.material},onChange:function(e){r(e.value)},options:ra.map((function(e){return{label:e,value:e}})),className:"react-select",classNamePrefix:" "})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{htmlFor:"".concat(a.id,"-simple-type"),className:"label"},"Beauty"),n.a.createElement(da.a,{id:"".concat(a.id,"-simple-type"),defaultValue:{label:t.type,value:t.type},onChange:function(e){i(e.value)},options:ia.map((function(e){return{label:e,value:e}})),className:"react-select",classNamePrefix:" "})))}}]),a}(r.Component))||rt,Fa=Object(g.a)(nt=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.floor,t=e.validationErrors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ht,{label:"Label",error:t.label,id:"".concat(e.id,"-label"),value:e.label,onChange:function(t){return e.label=t.target.value}}),n.a.createElement(Ht,{label:"Description",id:"".concat(e.id,"-desc"),value:e.description,onChange:function(t){return e.description=t.target.value},error:t.description,element:n.a.createElement("textarea",{className:"textarea"})}))}}]),a}(r.Component))||nt,Ba=a(62),Da=a.n(Ba),Pa=F.f().label("def").trim().matches(/^[a-z]+[a-z0-9_\.]*$/i,"def must start with a letter, and may not contain spaces or special characters other than '_'"),Sa=F.e().shape({def:Pa.required(),value:F.d().label("cost").required().moreThan(0)}),Aa=F.e().shape({def:Pa.required(),value:F.d().label("stat").required()}),qa=F.e().shape({defName:F.f().required(),label:F.f().required(),description:F.f().required(),texture:ea.required("floor must have a texture"),researchPrerequisites:F.b().of(Pa.required()),stuffCost:F.d().integer().positive(),stuffCategories:F.b().required().of(Pa.required()),costs:F.b().of(Sa),stats:F.b().of(Aa),affordances:F.b().required().min(1).of(Pa.required()),tags:F.b().of(F.f()),burnedDef:Pa,terrainAffordanceNeeded:Pa}),Ma=(jt=Ot=function(){function e(){Object(d.a)(this,e),this.id=void 0,Object(u.a)(this,"label",ot,this),Object(u.a)(this,"description",lt,this),Object(u.a)(this,"texture",ct,this),Object(u.a)(this,"edgeType",st,this),Object(u.a)(this,"stuffCategories",ut,this),Object(u.a)(this,"stuffcost",dt,this),Object(u.a)(this,"costs",ft,this),Object(u.a)(this,"stats",pt,this),Object(u.a)(this,"affordances",bt,this),Object(u.a)(this,"tags",ht,this),Object(u.a)(this,"terrainAffordanceNeeded",mt,this),Object(u.a)(this,"researchPrerequisites",vt,this),Object(u.a)(this,"burnedDef",gt,this),Object(u.a)(this,"resetFloor",yt,this),this.id="floor-".concat(e.floorCount++),this.resetFloor("Wood","Pretty")}return Object(f.a)(e,[{key:"defName",get:function(){return D("StuffedFloor_".concat(Va.name,"_").concat(this.label))}},{key:"validationErrors",get:function(){return S(this,qa)}}]),e}(),Ot.floorCount=0,it=jt,Object(p.a)(it.prototype,"defName",[y.h],Object.getOwnPropertyDescriptor(it.prototype,"defName"),it.prototype),ot=Object(p.a)(it.prototype,"label",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),lt=Object(p.a)(it.prototype,"description",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ct=Object(p.a)(it.prototype,"texture",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=Object(p.a)(it.prototype,"edgeType",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Hard"}}),ut=Object(p.a)(it.prototype,"stuffCategories",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.o.array([])}}),dt=Object(p.a)(it.prototype,"stuffcost",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ft=Object(p.a)(it.prototype,"costs",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pt=Object(p.a)(it.prototype,"stats",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bt=Object(p.a)(it.prototype,"affordances",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.o.array(["Light","Medium","Heavy"])}}),ht=Object(p.a)(it.prototype,"tags",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.o.array(["Floor"])}}),mt=Object(p.a)(it.prototype,"terrainAffordanceNeeded",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Heavy"}}),vt=Object(p.a)(it.prototype,"researchPrerequisites",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.o.array([])}}),gt=Object(p.a)(it.prototype,"burnedDef",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=Object(p.a)(it.prototype,"resetFloor",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.costs=[],e.affordances.replace(["Light","Medium","Heavy"]),e.terrainAffordanceNeeded="Heavy",e.edgeType="Hard",e.stuffCategories.replace(na[t]),e.researchPrerequisites.replace(ca[t][a]),e.burnedDef=sa[t],e.stats=ua[t][a],e.stuffcost=oa[a],e.tags.replace(la[a])}}}),Object(p.a)(it.prototype,"validationErrors",[y.h],Object.getOwnPropertyDescriptor(it.prototype,"validationErrors"),it.prototype),it),Ia=Object(g.a)(Et=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(f.a)(a,[{key:"fetchKitten",value:function(){var e=Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://placekitten.com/".concat(Da()(200,500),"/").concat(Da()(200,500)));case 3:return t=e.sent,e.next=6,t.blob();case 6:a=e.sent,this.props.floor.texture=new ta(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching kitten");case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.floor;return n.a.createElement("div",{className:"floor"},n.a.createElement("div",{className:"top columns"},n.a.createElement("div",{className:"basics column is-half"},n.a.createElement(Fa,{floor:e}),n.a.createElement(Ca,{floor:e})),n.a.createElement("div",{className:"texture column is-half"},n.a.createElement(aa,{floor:e}))))}}]),a}(r.Component))||Et,Wa=(a(199),Object(g.a)((kt=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"addFloor",xt,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.tab,a=e.floors,r=e.onTabChange;return n.a.createElement("div",{className:"tabs is-boxed"},n.a.createElement("ul",null,n.a.createElement("li",{className:"about"===t?"is-active":""},n.a.createElement("a",{onClick:function(){return r("about")}},"About")),a.floors.map((function(e){return n.a.createElement("li",{key:e.id,className:t===e.id?"is-active":""},n.a.createElement("a",{onClick:function(){return r(e.id)}},e.label||e.id,t===e.id&&n.a.createElement(La,{className:"delete-x",onClick:function(){return a.removeFloor(e.id)}})))})),n.a.createElement("li",{className:"create-floor-button"},n.a.createElement("a",{onClick:this.addFloor},"+ Add Floor"))))}}]),a}(r.Component),xt=Object(p.a)(kt.prototype,"addFloor",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props,a=t.floors,r=t.onTabChange,n=new Ma;a.addFloor(n),r(n.id)}}}),wt=kt))||wt),Ra=(Nt=function(){function e(){var t=this;Object(d.a)(this,e),Object(u.a)(this,"floors",Ct,this),this.floors.push(new Ma),Object(y.g)((function(){return console.log("Added floor, we now have ".concat(t.floors.length," floors..."))}))}return Object(f.a)(e,[{key:"addFloor",value:function(e){this.floors.push(e)}},{key:"removeFloor",value:function(e){var t=this.floors.find((function(t){return t.id===e}));console.log({id:e,floor:t}),t&&this.floors.remove(t)}}]),e}(),Ct=Object(p.a)(Nt.prototype,"floors",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.o.array([])}}),Object(p.a)(Nt.prototype,"addFloor",[y.f],Object.getOwnPropertyDescriptor(Nt.prototype,"addFloor"),Nt.prototype),Object(p.a)(Nt.prototype,"removeFloor",[y.f],Object.getOwnPropertyDescriptor(Nt.prototype,"removeFloor"),Nt.prototype),Nt),La=Object(g.a)(zt=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("svg",Object.assign({height:"14",width:"14",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false"},this.props),n.a.createElement("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"})))}}]),a}(r.Component))||zt,Va=new Ut,Ha=new Ra,Ua=y.o.box(!1),Xa=Object(g.a)((Ft=function(e){Object(c.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(u.a)(e,"about",Bt,Object(l.a)(e)),Object(u.a)(e,"floors",Dt,Object(l.a)(e)),Object(u.a)(e,"tab",Pt,Object(l.a)(e)),Object(u.a)(e,"submitting",St,Object(l.a)(e)),Object(u.a)(e,"changeTab",At,Object(l.a)(e)),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.floors.floors.find((function(t){return t.id===e.tab}));return n.a.createElement("div",{id:"main",className:"container"},n.a.createElement("div",{className:"box"},n.a.createElement(Wa,{floors:this.floors,tab:this.tab,onTabChange:this.changeTab}),"about"===this.tab&&n.a.createElement(Yt,{about:this.about}),t&&n.a.createElement(Ia,{floor:t})),n.a.createElement(Rt,{about:this.about,floors:this.floors}))}}]),a}(r.Component),Bt=Object(p.a)(Ft.prototype,"about",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Va}}),Dt=Object(p.a)(Ft.prototype,"floors",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ha}}),Pt=Object(p.a)(Ft.prototype,"tab",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"floor-0"}}),St=Object(p.a)(Ft.prototype,"submitting",[y.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ua}}),At=Object(p.a)(Ft.prototype,"changeTab",[y.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){console.log({tab:t}),e.tab=t}}}),Tt=Ft))||Tt;o.a.render(n.a.createElement(Xa,null),document.getElementById("root"))},94:function(e,t,a){e.exports=a(200)}},[[94,1,2]]]);
//# sourceMappingURL=main.1d9e9bf2.chunk.js.map